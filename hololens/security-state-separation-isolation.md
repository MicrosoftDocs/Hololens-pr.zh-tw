---
title: 狀態分離與隔離
description: 瞭解 HoloLens 2 混合實境裝置上的狀態分離、隔離、程式碼簽署及 Defender 應用程式。
author: evmill
ms.author: v-evmill
ms.reviewer: tagran
ms.date: 6/30/2020
ms.topic: article
keywords: 安全性、hololens、狀態分離、狀態分離與隔離、hololens 2、hololens2 安全性、安全性概觀、安全性架構、架構、hololens 2 架構
ms.prod: hololens
ms.sitesec: library
ms.localizationpriority: high
manager: yannisle
appliesto:
- HoloLens 2
ms.openlocfilehash: 60d6d7c0e281395957ce9158144a5f3d60927682
ms.sourcegitcommit: d20057957aa05c025c9838119cc29264bc57b4bd
ms.translationtype: HT
ms.contentlocale: zh-TW
ms.lasthandoff: 01/21/2021
ms.locfileid: "11282804"
---
# <span data-ttu-id="04276-104">狀態分離與隔離</span><span class="sxs-lookup"><span data-stu-id="04276-104">State separation and isolation</span></span>

<span data-ttu-id="04276-105">狀態分離與隔離可保護 HoloLens 2 作業系統的關鍵部分 (例如，作業系統開機至受信任狀態所需的部分) 不遭受變更。</span><span class="sxs-lookup"><span data-stu-id="04276-105">State separation and isolation protects critical portions of the Hololens 2 operating system from change – such as those required for the operating system to boot into a trusted state.</span></span> <span data-ttu-id="04276-106">使用隔離技術，不受信任的應用程式會被移至隔離的沙箱環境，以確保它們不會影響系統安全性。</span><span class="sxs-lookup"><span data-stu-id="04276-106">With isolation technology, untrusted apps are moved to an isolated sandbox environment, to ensure that they do not affect system security.</span></span>

## <span data-ttu-id="04276-107">狀態分離</span><span class="sxs-lookup"><span data-stu-id="04276-107">State separation</span></span>

<span data-ttu-id="04276-108">HoloLens 2 上的狀態分離大大提升安全性和可維護性（更新），並協助保護您的應用程式資料。</span><span class="sxs-lookup"><span data-stu-id="04276-108">State separation on HoloLens 2 vastly improves security and serviceability (updating) and helps protect your application data.</span></span>  <span data-ttu-id="04276-109">狀態分離的運作方式如下：</span><span class="sxs-lookup"><span data-stu-id="04276-109">State separation works as follows:</span></span>
  * <span data-ttu-id="04276-110">核心作業系統儲存于核心作業系統磁碟區（信任的或已驗證的 Microsoft 作業系統更新作業系統）。</span><span class="sxs-lookup"><span data-stu-id="04276-110">The core operating system is stored in the core operating system volume (trusted or verified Microsoft OS updating the operating system).</span></span>
  * <span data-ttu-id="04276-111">作業系統中可以在執行期間變更的部分（例如可下載的驅動程式和設定）會使用更進一步的狀態分離來劃分資料，並將資料儲存在安全的個別儲存位置。</span><span class="sxs-lookup"><span data-stu-id="04276-111">The portions of the operating system that can be changed at run time (such as downloadable drivers and configurations), use further state separation to partition the data, and to store it in secure, separate storage locations.</span></span>
  * <span data-ttu-id="04276-112">每個安全儲存位置都有不同的相關安全性原則，提供如下列各節中的詳細說明的不同安全優勢。</span><span class="sxs-lookup"><span data-stu-id="04276-112">Each secure storage location has distinct security policies associated with it, offering varied security advantages as detailed in the following section.</span></span>

## <span data-ttu-id="04276-113">狀態分離優點</span><span class="sxs-lookup"><span data-stu-id="04276-113">State separation benefits</span></span>

  * <span data-ttu-id="04276-114">安全性： HoloLens 2 中所述的狀態分離極大地改善了平臺完整性、惡意程式碼抵抗及使用者資料保護。</span><span class="sxs-lookup"><span data-stu-id="04276-114">Security: The state separation featured in HoloLens 2 significantly improves platform integrity, malware resistance and user data protection.</span></span> <span data-ttu-id="04276-115">透過將作業系統中不可改變的部分分離，並將它設為唯讀或完整性保護，狀態分隔可讓惡意程式碼難以成功突破冷開機。</span><span class="sxs-lookup"><span data-stu-id="04276-115">By separating the unalterable part of the operating system and making it read-only or integrity protected, state separation makes it extremely difficult for malware to persist across a cold reboot.</span></span> 
  * <span data-ttu-id="04276-116">更新：有了 HoloLens 2，一旦核心作業系統被修改且與裝置上其他資料完全分開的話，更新就會變得簡單又可靠。</span><span class="sxs-lookup"><span data-stu-id="04276-116">Updates: With HoloLens 2, once the core operating system is unmodifiable and has been cleanly separated from the rest of the data on the device, updates become simple and reliable.</span></span>  <span data-ttu-id="04276-117">此外，狀態分離為更快的更新奠定重要的基礎，這讓作業系統能夠透過單一步驟（原子單位）被替換。</span><span class="sxs-lookup"><span data-stu-id="04276-117">In addition, state separation lays the vital groundwork for dramatically faster updates, which permits the operating system to be replaced in a single step (atomic unit).</span></span>
  * <span data-ttu-id="04276-118">裝置重設： HoloLens 2 重設會清除使用者在裝置上產生的資料和使用者應用程式資料，包括內部和外部儲存位置。</span><span class="sxs-lookup"><span data-stu-id="04276-118">Device reset: HoloLens 2 reset clears user generated data and user app data on the device – including internal and external storage locations.</span></span> <span data-ttu-id="04276-119">它會保留目前的作業系統應用程式和安全性關鍵應用程式，以及目前的 Microsoft 和 OEM 自訂應用程式（預先安裝）。</span><span class="sxs-lookup"><span data-stu-id="04276-119">It preserves the current OS apps and security critical apps, and the current Microsoft and OEM customized apps (Preinstalled).</span></span> <span data-ttu-id="04276-120">在重設完成之後，您可以在裝置上重新使用這些預先安裝應用程式</span><span class="sxs-lookup"><span data-stu-id="04276-120">These Preinstalled apps can be rehydrated on the device after reset completes</span></span>

### <span data-ttu-id="04276-121">狀態分離狀態</span><span class="sxs-lookup"><span data-stu-id="04276-121">State separation states</span></span>

<span data-ttu-id="04276-122">狀態分隔可確保作業系統只能由 Microsoft 信賴裝置元件進行變更，且只允許高值狀態在重新開機時持續保留;其他系統狀態只有在啟動模式期間才存在，並會在重新開機後遭到捨棄。</span><span class="sxs-lookup"><span data-stu-id="04276-122">State separation ensures the operating system can only be changed by Microsoft trusted device components and only high-value state is allowed to persist across reboots; other system state exists only for the duration of the boot session and is discarded after a reboot.</span></span> <span data-ttu-id="04276-123">讓狀態分隔迅速將裝置重新回到原廠狀態。</span><span class="sxs-lookup"><span data-stu-id="04276-123">Having state separation rapidly returns the device back to factory state.</span></span> <span data-ttu-id="04276-124">Windows Holographic for Business 狀態可以分成以下不同的類別：</span><span class="sxs-lookup"><span data-stu-id="04276-124">Windows Holographic for Business states can be divided into these distinct categories:</span></span>
  * <span data-ttu-id="04276-125">核心作業系統 - 不可改變狀態</span><span class="sxs-lookup"><span data-stu-id="04276-125">Core operating system – Unalterable state</span></span>
  * <span data-ttu-id="04276-126">作業系統資料 - 可改變狀態</span><span class="sxs-lookup"><span data-stu-id="04276-126">Operating System Data – Alterable state</span></span> 
  * <span data-ttu-id="04276-127">使用者資料 – 可改變狀態</span><span class="sxs-lookup"><span data-stu-id="04276-127">User Data – Alterable state</span></span>

<span data-ttu-id="04276-128">下列各節將說明這些 HoloLens 2 的每個操作狀態。</span><span class="sxs-lookup"><span data-stu-id="04276-128">Each of these HoloLens 2 operating states is described in the following section.</span></span>

#### <span data-ttu-id="04276-129">核心作業系統</span><span class="sxs-lookup"><span data-stu-id="04276-129">Core operating system</span></span>

<span data-ttu-id="04276-130">不可變狀態由可執行的不可改變檔案和資料所組成，且只能在安裝更新期間由 Microsoft 變更。</span><span class="sxs-lookup"><span data-stu-id="04276-130">An immutable state is comprised of executable files and data that are unalterable and can only be changed by Microsoft during the installation of updates.</span></span> <span data-ttu-id="04276-131">在這類核心作業系統的更新期間，會啟用包含最新所需操作狀態的新影像。</span><span class="sxs-lookup"><span data-stu-id="04276-131">During such an update of the core operating system, a new image containing the latest desired operating state is enabled.</span></span>
<span data-ttu-id="04276-132">不可改變狀態會標示為 [唯讀] （或以其他方式受完整性保護），以防止任何具有提升許可權的惡意程式碼的留下。</span><span class="sxs-lookup"><span data-stu-id="04276-132">The unalterable state is marked as read-only (or is otherwise integrity-protected), preventing persistence of any malware with elevated privileges.</span></span> <span data-ttu-id="04276-133">下列可執行檔案和資料在不可變狀態受保護：</span><span class="sxs-lookup"><span data-stu-id="04276-133">The following executable files and data are protected in the immutable state:</span></span>
  * <span data-ttu-id="04276-134">Windows Holographic 信箱驅動程式</span><span class="sxs-lookup"><span data-stu-id="04276-134">Windows Holographic inbox drivers</span></span>
  * <span data-ttu-id="04276-135">作業系統二進位檔案</span><span class="sxs-lookup"><span data-stu-id="04276-135">Operating system binaries</span></span>
  * <span data-ttu-id="04276-136">Windows 信箱驅動程式</span><span class="sxs-lookup"><span data-stu-id="04276-136">Windows inbox drivers</span></span>
  * <span data-ttu-id="04276-137">Windows 登錄蜂巢（HKLM）中儲存的靜態 Windows Holographic 設定</span><span class="sxs-lookup"><span data-stu-id="04276-137">Static Windows Holographic settings stored in Windows registry hive (HKLM)</span></span>
    * <span data-ttu-id="04276-138">範例： HKLM 會儲存電腦上所安裝應用程式的設定資訊。</span><span class="sxs-lookup"><span data-stu-id="04276-138">Example: HKLM stores the configuration information for the apps installed on a machine.</span></span> <span data-ttu-id="04276-139">它也會儲存資訊，以偵測硬體與相應的驅動程式。</span><span class="sxs-lookup"><span data-stu-id="04276-139">It also stores information to detect hardware and the corresponding drivers.</span></span>
<span data-ttu-id="04276-140">透過保護它們處於不可變（完整性和唯讀保護）狀態，我們確保了核心作業系統永遠都能進入受信任狀態。</span><span class="sxs-lookup"><span data-stu-id="04276-140">By protecting these in the immutable (integrity and read-only protected) state, we ensure that the core operating system always boots into a trusted state.</span></span> <span data-ttu-id="04276-141">此外，當裝置重設時，我們可以確保裝置只啟動到於此不可變章節中的元件。</span><span class="sxs-lookup"><span data-stu-id="04276-141">Additionally, when a device is reset, we can ensure that the device boots only into the components that are on this immutable section.</span></span> 

#### <span data-ttu-id="04276-142">作業系統資料</span><span class="sxs-lookup"><span data-stu-id="04276-142">Operating system data</span></span> 

<span data-ttu-id="04276-143">請注意，當資料損毀或遭侵害時，可以放棄並重新建立運行時可改變（且對於作業系統函數並非至關重要）的可執行檔案和資料。</span><span class="sxs-lookup"><span data-stu-id="04276-143">It is important to note that executable files and data that are changeable at runtime (and are not critical to the operating system function), can be discarded and re-created when the data is corrupted or compromised.</span></span> <span data-ttu-id="04276-144">若要在作業系統中持續保持高值 alterable 狀態，或使用受支援的 Windows 作業系統和裝置案例，可能會在作業系統關閉和/或每次重新開機時持續保留。</span><span class="sxs-lookup"><span data-stu-id="04276-144">A high-value alterable state is either functionally required to persist by the operating system, or expected to persist across operating system shutdown, and/or across reboots by supported Windows operating system and device scenarios.</span></span> <span data-ttu-id="04276-145">高值可變狀態的範例如下：</span><span class="sxs-lookup"><span data-stu-id="04276-145">Examples of high-value mutable state are:</span></span>
  * <span data-ttu-id="04276-146">IT 系統管理員設定的全域裝置設定，例如停用所有使用者的位置。</span><span class="sxs-lookup"><span data-stu-id="04276-146">IT Admin-configured global device settings, such as disabling the location for all users.</span></span>
  * <span data-ttu-id="04276-147">Wi-fi 網路連線存取資料-裝置-記住的網路及相關聯的連線密碼。</span><span class="sxs-lookup"><span data-stu-id="04276-147">Wi-fi network connection access data-device-remembered networks and associated connection passwords.</span></span>
  * <span data-ttu-id="04276-148">損毀傾印包括設定、記錄。</span><span class="sxs-lookup"><span data-stu-id="04276-148">Crash dumps including settings, logs.</span></span>
  * <span data-ttu-id="04276-149">針對新發現的裝置所需下載的驅動程式。</span><span class="sxs-lookup"><span data-stu-id="04276-149">Drivers downloaded on-demand for newly discovered devices.</span></span>
<span data-ttu-id="04276-150">HoloLens 2 上的高值可改變狀態位於作業系統資料安全位置，若不是作為磁碟上儲存的檔案，就是保留的登錄配置單元中的檔案。</span><span class="sxs-lookup"><span data-stu-id="04276-150">A high-value alterable state on HoloLens 2 resides on the operating system Data security location, either as a saved file on disk or in a persisted registry hive.</span></span>

#### <span data-ttu-id="04276-151">使用者資料</span><span class="sxs-lookup"><span data-stu-id="04276-151">User data</span></span>

<span data-ttu-id="04276-152">最後一個狀態類別代表由 UWP 應用程式或作業系統所產生或保留的使用者資料。</span><span class="sxs-lookup"><span data-stu-id="04276-152">The last category of state represents user data produced or persisted by UWP applications or the operating system.</span></span> <span data-ttu-id="04276-153">所有已知的使用者資料夾（例如 [下載]、[文件]、[影片]、[使用者設定檔] 和 [HKEY_CURRENT_USER] 蜂巢）都會儲存在這個位置。</span><span class="sxs-lookup"><span data-stu-id="04276-153">All known user folders such as Downloads, Documents, Videos, user profiles and HKEY_CURRENT_USER hive are also stored in this location.</span></span> <span data-ttu-id="04276-154">在沒有正確認證的情況下，無法解開資料。若要深入瞭解您的資料保護方式，請參閱 [加密與資料保護](security-encryption-data-protection.md)。</span><span class="sxs-lookup"><span data-stu-id="04276-154">This data cannot be extracted without proper credentials; to learn more about how your data is protected, see [Encryption and Data Protection](security-encryption-data-protection.md).</span></span>

##  <span data-ttu-id="04276-155">隔離</span><span class="sxs-lookup"><span data-stu-id="04276-155">Isolation</span></span>

<span data-ttu-id="04276-156">為了達到此平衡，HoloLens 2 有一個核心作業系統，可用於如啟動、硬體控制、登入等主要功用。目前只有兩組應用程式可以在核心作業系統上執行，預先安裝的應用程式和 UWP 應用程式。</span><span class="sxs-lookup"><span data-stu-id="04276-156">To achieve this balance, HoloLens 2 has a core operating system that is used for primary functions such as booting up, hardware control, logging in etc. There are only two sets of applications that run on the core operating system – pre-installed applications and UWP apps.</span></span>

## <span data-ttu-id="04276-157">程式碼簽署</span><span class="sxs-lookup"><span data-stu-id="04276-157">Code signing</span></span>

<span data-ttu-id="04276-158">數位簽章代碼允許因為是由信任的來源簽署，因此具有真確性和完整性的可執行檔案和腳本尚未修正的證實。</span><span class="sxs-lookup"><span data-stu-id="04276-158">Digitally signing code allows substantiation that executables and scripts have not been modified since they were signed by a trusted source therefore providing authenticity and integrity.</span></span> <span data-ttu-id="04276-159">HoloLens 2 因預設而信任的授權是 Microsoft 和 Microsoft Store。</span><span class="sxs-lookup"><span data-stu-id="04276-159">The authorities that HoloLens 2 trusts by default are Microsoft and Microsoft Store.</span></span> <span data-ttu-id="04276-160">IT 系統管理員可以透過 [ClientCertificateInstall](https://docs.microsoft.com/windows/client-management/mdm/clientcertificateinstall-csp) 和 [RootCATrustedCertificates](https://docs.microsoft.com/windows/client-management/mdm/rootcacertificates-csp) Csp，將新的憑證新增到裝置。</span><span class="sxs-lookup"><span data-stu-id="04276-160">IT administrators can add new certificates to the device through the [ClientCertificateInstall](https://docs.microsoft.com/windows/client-management/mdm/clientcertificateinstall-csp) and [RootCATrustedCertificates](https://docs.microsoft.com/windows/client-management/mdm/rootcacertificates-csp) CSPs.</span></span> <span data-ttu-id="04276-161">他們也可以使用 [AllowAllTrustedApps 原則](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-applicationmanagement#applicationmanagement-allowalltrustedapps) 以信任其他側向負荷或 [企業營運應用程式](https://docs.microsoft.com/intune/apps/lob-apps-windows)。</span><span class="sxs-lookup"><span data-stu-id="04276-161">They can also use the [AllowAllTrustedApps policy](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-applicationmanagement#applicationmanagement-allowalltrustedapps) to trust additional sideloaded or [Line-of-business apps](https://docs.microsoft.com/intune/apps/lob-apps-windows).</span></span> <span data-ttu-id="04276-162">憑證會駐留于本機電腦憑證儲存中，如果使用「裝置」的話會被存在 HKLM/Root 中，或如果使用「使用者」的話會被存在 HKCU 中。</span><span class="sxs-lookup"><span data-stu-id="04276-162">Certificates reside in the local machine certificate store which is stored in HKLM/Root if using “Device” or in HKCU if using “User”.</span></span>

## <span data-ttu-id="04276-163">防禦程式防護</span><span class="sxs-lookup"><span data-stu-id="04276-163">Defender protections</span></span>
<span data-ttu-id="04276-164">HoloLens 2 使用 Microsoft 服務以提供使用者進階層級的安全性：</span><span class="sxs-lookup"><span data-stu-id="04276-164">HoloLens 2 uses Microsoft services to give users an advanced level of security:</span></span>

* <span data-ttu-id="04276-165">作業系統會自動在 Windows Holographic 上啟用 [Defender SmartScreen](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-smartscreen/microsoft-defender-smartscreen-overview)，並防止網路釣魚和惡意軟體，以及在 Microsoft Edge 上防止下載潛在的惡意文件。</span><span class="sxs-lookup"><span data-stu-id="04276-165">[Defender SmartScreen](https://docs.microsoft.com/windows/security/threat-protection/microsoft-defender-smartscreen/microsoft-defender-smartscreen-overview) is automatically enabled on Windows Holographic by the OS and protects against phishing and malware, as well as the downloading of potentially malicious files, on Edge.</span></span> <span data-ttu-id="04276-166">使用者無法關閉，但可以透過原則停用該功能。</span><span class="sxs-lookup"><span data-stu-id="04276-166">It cannot be turned off by the user but can be disabled through policy.</span></span>

* <span data-ttu-id="04276-167">[[Defender 防火牆]](https://docs.microsoft.com/windows/security/threat-protection/windows-firewall/windows-firewall-with-advanced-security) 會封鎖進出您裝置的未授權網路流量。</span><span class="sxs-lookup"><span data-stu-id="04276-167">[Defender Firewall](https://docs.microsoft.com/windows/security/threat-protection/windows-firewall/windows-firewall-with-advanced-security) blocks unauthorized network traffic from flowing to and from your device.</span></span> <span data-ttu-id="04276-168">它預設為啟用狀態，且不能由客戶透過本機動作或原則進行設定。</span><span class="sxs-lookup"><span data-stu-id="04276-168">It is enabled by default and not configurable by the customer through local actions or policy.</span></span> 

* <span data-ttu-id="04276-169">[Windows Defender 應用程式控制項](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/wdac-and-applocker-overview)： HoloLens 2 支援能讓 IT 系統管理員能將應用程式控制原則推送到裝置上的WDAC。</span><span class="sxs-lookup"><span data-stu-id="04276-169">[Windows Defender Application Control](https://docs.microsoft.com/windows/security/threat-protection/windows-defender-application-control/wdac-and-applocker-overview):  HoloLens 2 supports WDAC which allows IT admin to push application control policies onto the device.</span></span> <span data-ttu-id="04276-170">如需詳細資訊，請參閱 [在 HoloLens 2 裝置上以 MSFT Intune 使用 WDAC](https://docs.microsoft.com/mem/intune/configuration/custom-profile-hololens)。</span><span class="sxs-lookup"><span data-stu-id="04276-170">More info can be found in [Use WDAC on HoloLens 2 devices with MSFT Intune](https://docs.microsoft.com/mem/intune/configuration/custom-profile-hololens).</span></span> 

<span data-ttu-id="04276-171">IT 系統管理員可以透過[AllowSmartScreen](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-browser#browser-allowsmartscreen)來管理 SmartScreen 行為，及透過 [這些原則](https://docs.microsoft.com/windows/client-management/mdm/policy-csps-supported-by-hololens2)來管理瀏覽器行為。</span><span class="sxs-lookup"><span data-stu-id="04276-171">IT admins can manage SmartScreen behavior through [AllowSmartScreen](https://docs.microsoft.com/windows/client-management/mdm/policy-csp-browser#browser-allowsmartscreen) and browser behavior through [these policies](https://docs.microsoft.com/windows/client-management/mdm/policy-csps-supported-by-hololens2).</span></span> 

